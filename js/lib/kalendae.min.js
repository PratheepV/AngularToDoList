/********************************************************************
 *	Kalendae, a framework agnostic javascript date picker           *
 *	Copyright(c) 2012 Jarvis Badgley (chipersoft@gmail.com)         *
 *	http://github.com/ChiperSoft/Kalendae                           *
 *	Version 0.1                                                     *
 ********************************************************************/

(function(){var l,j=function(a,b){a instanceof Element||"string"===typeof a||(b=a);var c=this,d=c.classes,e=c.settings=g.merge(c.defaults,{attachTo:a},b||{}),r=c.container=g.make("div",{"class":d.container}),x=c.calendars=[],j=h().day(e.weekStart),m,n=[],f,k,y;f=[];var l;k=0;m=e.months;for(k=7;k--;)n.push(j.format("ddd").substr(0,e.columnHeaderLength)),j.add("days",1);A(c);if("object"===typeof e.subscribe)for(k in e.subscribe)e.subscribe.hasOwnProperty(k)&&c.subscribe(k,e.subscribe[k]);c._sel=[];
e.selected&&c.setSelected(e.selected,!1);m=e.viewStartDate?h(e.viewStartDate,e.format):0<c._sel.length?h(c._sel[0]):h();c.viewStartDate=m.date(1);if((m={past:e.months-1,"today-past":e.months-1,any:2<e.months?Math.floor(e.months/2):0,"today-future":0,future:0}[this.settings.direction])&&h().month()==h(c.viewStartDate).month())c.viewStartDate=h(c.viewStartDate).subtract({M:m}).date(1);if("function"===typeof e.blackout)c.blackout=e.blackout;else if(e.blackout){var w=z(e.blackout,e.parseSplitDelimiter);
c.blackout=function(a){a=h(a).yearDay();if(1>a||!c._sel||1>c._sel.length)return!1;for(var b=w.length;b--;)if(w[b].yearDay()===a)return!0;return!1}}else c.blackout=function(){return!1};c.direction=c.directions[e.direction]?c.directions[e.direction]:c.directions.any;for(m=Math.max(e.months,1);m--;){f=g.make("div",{"class":d.calendar},r);f.setAttribute("data-cal-index",m);1<e.months&&(m==Math.max(e.months-1,1)?g.addClassName(f,d.monthFirst):0===m?g.addClassName(f,d.monthLast):g.addClassName(f,d.monthMiddle));
k=g.make("div",{"class":d.title},f);g.make("a",{"class":d.previous},k);g.make("a",{"class":d.next},k);j=g.make("span",{"class":d.caption},k);y=g.make("div",{"class":d.header},f);k=0;do l=g.make("span",{},y),l.innerHTML=n[k];while(7>++k);y=g.make("div",{"class":d.days},f);k=0;for(f=[];42>k++;)f.push(g.make("span",{},y));x.push({caption:j,days:f});m&&g.make("div",{"class":d.monthSeparator},r)}c.draw();g.addEvent(r,"mousedown",function(a,b){var f;if(g.hasClassName(b,d.next))!c.disableNext&&!1!==c.publish("view-changed",
c,["next"])&&(c.viewStartDate.add("months",1),c.draw());else if(g.hasClassName(b,d.previous))!c.disablePrevious&&!1!==c.publish("view-changed",c,["previous"])&&(c.viewStartDate.subtract("months",1),c.draw());else if(g.hasClassName(b.parentNode,d.days)&&g.hasClassName(b,d.dayActive)&&(f=b.getAttribute("data-date")))if(f=h(f,e.dayAttributeFormat),!1!==c.publish("date-clicked",c,[f]))switch(e.mode){case "multiple":c.addSelected(f)||c.removeSelected(f);break;case "range":c.addSelected(f);break;default:c.addSelected(f)}return!1});
(e.attachTo=g.$(e.attachTo))&&e.attachTo.appendChild(r)};j.prototype={defaults:{attachTo:null,months:1,weekStart:0,direction:"any",directionScrolling:!0,viewStartDate:null,blackout:null,selected:null,mode:"single",format:null,subscribe:null,columnHeaderLength:2,titleFormat:"MMMM, YYYY",dayNumberFormat:"D",dayAttributeFormat:"YYYY-MM-DD",parseSplitDelimiter:/,\s*|\s+-\s+/,rangeDelimiter:" - ",multipleDelimiter:", ",dateClassMap:{}},classes:{container:"kalendae",calendar:"k-calendar",monthFirst:"k-first-month",
monthMiddle:"k-middle-month",monthLast:"k-last-month",title:"k-title",previous:"k-previous",next:"k-next",caption:"k-caption",header:"k-header",days:"k-days",dayOutOfMonth:"k-out-of-month",dayActive:"k-active",daySelected:"k-selected",dayInRange:"k-range",dayToday:"k-today",monthSeparator:"k-separator",disablePrevious:"k-disable-previous",disableNext:"k-disable-next"},disablePrevious:!1,disableNext:!1,directions:{past:function(a){return h(a).yearDay()>=l.yearDay()},"today-past":function(a){return h(a).yearDay()>
l.yearDay()},any:function(){return!1},"today-future":function(a){return h(a).yearDay()<l.yearDay()},future:function(a){return h(a).yearDay()<=l.yearDay()}},getSelectedAsDates:function(){for(var a=[],b=0,c=this._sel.length;b<c;b++)a.push(this._sel[b].nativeDate());return a},getSelectedAsText:function(a){for(var b=[],c=0,d=this._sel.length;c<d;c++)b.push(this._sel[c].format(a||this.settings.format||"YYYY-MM-DD"));return b},getSelectedRaw:function(){for(var a=[],b=0,c=this._sel.length;b<c;b++)a.push(h(this._sel[b]));
return a},getSelected:function(a){a=this.getSelectedAsText(a);switch(this.settings.mode){case "range":return a.splice(2),a.join(this.settings.rangeDelimiter);case "multiple":return a.join(this.settings.multipleDelimiter);default:return a[0]}},isSelected:function(a){a=h(a).yearDay();if(1>a||!this._sel||1>this._sel.length)return!1;switch(this.settings.mode){case "range":var b=this._sel[0]?this._sel[0].yearDay():0,c=this._sel[1]?this._sel[1].yearDay():0;return b===a||c===a?1:!b||!c?0:a>b&&a<c||b<c&&
a<b&&a>c?-1:!1;case "multiple":for(b=this._sel.length;b--;)if(this._sel[b].yearDay()===a)return!0;return!1;default:return this._sel[0]&&this._sel[0].yearDay()===a}},setSelected:function(a,b){this._sel=z(a,this.settings.parseSplitDelimiter,this.settings.format);this._sel.sort(function(a,b){return a.yearDay()-b.yearDay()});!1!==b&&this.draw()},addSelected:function(a,b){a=h(a);switch(this.settings.mode){case "multiple":if(this.isSelected(a))return!1;this._sel.push(a);break;case "range":1!==this._sel.length?
this._sel=[a]:a.yearDay()>this._sel[0].yearDay()?this._sel[1]=a:this._sel=[a,this._sel[0]];break;default:this._sel=[a]}this._sel.sort(function(a,b){return a.yearDay()-b.yearDay()});this.publish("change",this);!1!==b&&this.draw();return!0},removeSelected:function(a,b){for(var a=h(a).yearDay(),c=this._sel.length;c--;)if(this._sel[c].yearDay()===a)return this._sel.splice(c,1),this.publish("change",this),!1!==b&&this.draw(),!0;return!1},draw:function(){var a=h(this.viewStartDate),b,c=this.classes,d,e,
r,j=0,D,m=0,n,f=this.settings;D=this.calendars.length;do{b=h(a).date(1);b.day(b.day()<this.settings.weekStart?this.settings.weekStart-7:this.settings.weekStart);d=this.calendars[j];d.caption.innerHTML=a.format(this.settings.titleFormat);m=0;do e=d.days[m],r=[],(n=this.isSelected(b))&&r.push({"-1":c.dayInRange,1:c.daySelected,"true":c.daySelected}[n]),b.month()!=a.month()?r.push(c.dayOutOfMonth):(!this.blackout(b)&&!this.direction(b)||0<n)&&r.push(c.dayActive),b.yearDay()===l.yearDay()&&r.push(c.dayToday),
n=b.format(this.settings.dayAttributeFormat),f.dateClassMap[n]&&r.push(f.dateClassMap[n]),e.innerHTML=b.format(f.dayNumberFormat),e.className=r.join(" "),e.setAttribute("data-date",n),b.add("days",1);while(42>++m);a.add("months",1)}while(++j<D);if(f.directionScrolling)if(a=-h().diff(a,"months"),"today-past"===f.direction||"past"===f.direction)0>=a?(this.disableNext=!1,g.removeClassName(this.container,c.disableNext)):(this.disableNext=!0,g.addClassName(this.container,c.disableNext));else if("today-future"===
f.direction||"future"===f.direction)a>f.months?(this.disablePrevious=!1,g.removeClassName(this.container,c.disablePrevious)):(this.disablePrevious=!0,g.addClassName(this.container,c.disablePrevious))}};var z=function(a,b,c){var d=[];"string"===typeof a?a=a.split(b):g.isArray(a)||(a=[a]);b=a.length;i=0;do a[i]&&d.push(h(a[i],c).hours(0).minutes(0).seconds(0).milliseconds(0));while(++i<b);return d};window.Kalendae=j;var g=j.util={$:function(a){return"string"==typeof a?document.getElementById(a):a},
$$:function(a){return document.querySelectorAll(a)},make:function(a,b,c){var d,a=document.createElement(a);if(b)for(d in b)b.hasOwnProperty(d)&&a.setAttribute(d,b[d]);c&&c.appendChild(a);return a},isVisible:function(a){return 0<a.offsetWidth||0<a.offsetHeight},domReady:function(a){/in/.test(document.readyState)?setTimeout(function(){g.domReady(a)},9):a()},addEvent:function(a,b,c){var d=function(b){var b=b||window.event,d=c.apply(a,[b,b.target||b.srcElement]);!1===d&&(b.preventDefault?b.preventDefault():
(b.returnValue=!1,b.cancelBubble=!0));return d};a.attachEvent?a.attachEvent("on"+b,d):a.addEventListener(b,d,!1);return d},removeEvent:function(a,b,c){a.detachEvent?a.detachEvent("on"+b,c):a.removeEventListener(b,c,!1)},hasClassName:function(a,b){if(!(a=g.$(a)))return!1;var c=a.className;return 0<c.length&&(c==b||RegExp("(^|\\s)"+b+"(\\s|$)").test(c))},addClassName:function(a,b){if((a=g.$(a))&&!g.hasClassName(a,b))a.className+=(a.className?" ":"")+b},removeClassName:function(a,b){if(a=g.$(a))a.className=
g.trimString(a.className.replace(RegExp("(^|\\s+)"+b+"(\\s+|$)")," "))},getPosition:function(a,b){var c=a.offsetLeft,d=a.offsetTop,e={};if(!b)for(;a=a.offsetParent;)c+=a.offsetLeft,d+=a.offsetTop;e[0]=e.left=c;e[1]=e.top=d;return e},getHeight:function(a){return a.offsetHeight||a.scrollHeight},getWidth:function(a){return a.offsetWidth||a.scrollWidth},trimString:function(a){return a.replace(/^\s+/,"").replace(/\s+$/,"")},merge:function(){for(var a=!0===arguments[0],b={},c=a?1:0;c<arguments.length;c++){var d=
b,e=arguments[c];if("object"===typeof e){var g=void 0;for(g in e)e.hasOwnProperty(g)&&(a&&"object"===typeof d[g]&&"object"===typeof e[g]?_update(d[g],e[g]):d[g]=e[g])}}return b},isArray:function(a){return!(!a||!a.length||0===a.length||"object"!==typeof a||!a.constructor||a.nodeType||a.item)}};j.util.domReady(function(){for(var a=g.$$(".auto-kal"),b=a.length,c;b--;)c=a[b],"INPUT"===c.tagName?new j.Input(c):new j({attachTo:c})});j.Input=function(a,b){var c=this.input=g.$(a),d;if(!c||"INPUT"!==c.tagName)throw"First argument for Kalendae.Input must be an <input> element or a valid element id.";
var e=this,h=e.classes;opts=e.settings=g.merge(e.defaults,b);opts.attachTo=window.document.body;opts.selected?d=!0:opts.selected=c.value;j.call(e,opts);d&&(c.value=e.getSelected());d=e.container;var x=!1;d.style.display="none";g.addClassName(d,h.positioned);g.addEvent(d,"mousedown",function(){x=true});g.addEvent(window.document,"mousedown",function(){x=false});g.addEvent(c,"focus",function(){e.setSelected(this.value);e.show()});g.addEvent(c,"blur",function(){if(x){x=false;c.focus()}else e.hide()});
g.addEvent(c,"keyup",function(){e.setSelected(this.value)});e.subscribe("change",function(){c.value=e.getSelected()})};j.Input.prototype=g.merge(j.prototype,{defaults:g.merge(j.prototype.defaults,{format:"MM/DD/YYYY",side:"bottom",offsetLeft:0,offsetTop:0}),classes:g.merge(j.prototype.classes,{positioned:"k-floating"}),show:function(){var a=this.container,b=a.style,c=this.input,d=g.getPosition(c);b.display="";switch(opts.side){case "left":b.left=d.left-g.getWidth(a)+this.settings.offsetLeft+"px";
b.top=d.top+this.settings.offsetTop+"px";break;case "right":b.left=d.left+g.getWidth(c)+"px";b.top=d.top+this.settings.offsetTop+"px";break;case "top":b.left=d.left+this.settings.offsetLeft+"px";b.top=d.top-g.getHeight(a)+this.settings.offsetTop+"px";break;default:b.left=d.left+this.settings.offsetLeft+"px",b.top=d.top+g.getHeight(c)+this.settings.offsetTop+"px"}},hide:function(){this.container.style.display="none"}});var A=function(a){a||(a=this);var b=a.c_||{};a.publish=function(a,d,e){for(var g=
(a=b[a])?a.length:0,h;g--;)if(h=a[g].apply(d,e||[]),"boolean"===typeof h)return h};a.subscribe=function(a,d,e){b[a]||(b[a]=[]);e?b[a].push(d):b[a].unshift(d);return[a,d]};a.unsubscribe=function(a){for(var d=b[a[0]],a=a[1],e=d?d.length:0;e--;)d[e]===a&&d.splice(e,1)}},h=j.moment=function(a,b){function c(a){this._d=a}function d(a,c){for(var b=a+"";b.length<c;)b="0"+b;return b}function e(b,c,d,e){var g="string"===typeof c,f=g?{}:c;g&&e&&(f[c]=e);c=(f.ms||f.milliseconds||0)+1E3*(f.s||f.seconds||0)+6E4*
(f.m||f.minutes||0)+36E5*(f.h||f.hours||0);e=(f.d||f.days||0)+7*(f.w||f.weeks||0);f=(f.M||f.months||0)+12*(f.y||f.years||0);c&&b.setTime(+b+c*d);e&&b.setDate(b.getDate()+e*d);f&&(c=b.getDate(),b.setDate(1),b.setMonth(b.getMonth()+f*d),b.setDate(Math.min((new a(b.getFullYear(),b.getMonth()+1,0)).getDate(),c)));return b}function g(b){return new a(b[0],b[1]||0,b[2]||1,b[3]||0,b[4]||0,b[5]||0,b[6]||0)}function h(b,e){function g(c){var e;switch(c){case "M":return v+1;case "Mo":return v+1+l(v+1);case "MM":return d(v+
1,2);case "MMM":return f.monthsShort[v];case "MMMM":return f.months[v];case "D":return j;case "Do":return j+l(j);case "DD":return d(j,2);case "DDD":return c=new a(k,v,j),e=new a(k,0,1),~~((c-e)/864E5+1.5);case "DDDo":return c=g("DDD"),c+l(c);case "DDDD":return d(g("DDD"),3);case "d":return q;case "do":return q+l(q);case "ddd":return f.weekdaysShort[q];case "dddd":return f.weekdays[q];case "w":return c=new a(k,v,j-q+5),e=new a(c.getFullYear(),0,4),~~((c-e)/864E5/7+1.5);case "wo":return c=g("w"),c+
l(c);case "ww":return d(g("w"),2);case "YY":return d(k%100,2);case "YYYY":return k;case "a":return 11<t?n.pm:n.am;case "A":return 11<t?n.PM:n.AM;case "H":return t;case "HH":return d(t,2);case "h":return t%12||12;case "hh":return d(t%12||12,2);case "m":return m;case "mm":return d(m,2);case "s":return p;case "ss":return d(p,2);case "zz":case "z":return(b.toString().match(F)||[""])[0].replace(E,"");case "Z":return(0<o?"+":"-")+d(~~(Math.abs(o)/60),2)+":"+d(~~(Math.abs(o)%60),2);case "ZZ":return(0<o?
"+":"-")+d(~~(10*Math.abs(o)/6),4);case "L":case "LL":case "LLL":case "LLLL":case "LT":return h(b,f.longDateFormat[c]);default:return c.replace(/(^\[)|(\\)|\]$/g,"")}}var u=new c(b),v=u.month(),j=u.date(),k=u.year(),q=u.day(),t=u.hours(),m=u.minutes(),p=u.seconds(),o=u.zone(),l=f.ordinal,n=f.meridiem;return e.replace(A,g)}function j(b,c){var d=[0,0,1,0,0,0,0],e=0,h=0,k=!1,m=b.match(B),q=c.match(G),l,n;for(l=0;l<q.length;l++){var p=m[l],o=void 0;switch(q[l]){case "M":case "MM":d[1]=~~p-1;break;case "MMM":case "MMMM":for(o=
0;12>o;o++)if(f.monthsParse[o].test(p)){d[1]=o;break}break;case "D":case "DD":case "DDD":case "DDDD":d[2]=~~p;break;case "YY":p=~~p;d[0]=p+(70<p?1900:2E3);break;case "YYYY":d[0]=~~Math.abs(p);break;case "a":case "A":n="pm"===p.toLowerCase();break;case "H":case "HH":case "h":case "hh":d[3]=~~p;break;case "m":case "mm":d[4]=~~p;break;case "s":case "ss":d[5]=~~p;break;case "Z":case "ZZ":k=!0,o=p.match(H),o[1]&&(e=~~o[1]),o[2]&&(h=~~o[2]),"-"===o[0]&&(e=-e,h=-h)}}n&&12>d[3]&&(d[3]+=12);!1===n&&12===d[3]&&
(d[3]=0);d[3]+=e;d[4]+=h;return k?new a(a.UTC.apply({},d)):g(d)}function m(a,b,c){var d=f.relativeTime[a];return"function"===typeof d?d(b||1,!!c,a):d.replace(/%d/i,b||1)}function n(a,b){f.fn[a]=function(a){return"undefined"!==typeof a?(this._d["set"+b](a),this):this._d["get"+b]()}}var f,k=Math.round,l={},z="undefined"!==typeof module,w="months,monthsShort,monthsParse,weekdays,weekdaysShort,longDateFormat,calendar,relativeTime,ordinal,meridiem".split(","),s,A=/(\[[^\[]*\])|(\\)?(Mo|MM?M?M?|Do|DDDo|DD?D?D?|dddd?|do?|w[o|w]?|YYYY|YY|a|A|hh?|HH?|mm?|ss?|zz?|ZZ?|LT|LL?L?L?)/g,
E=/[^A-Z]/g,F=/\([A-Za-z ]+\)|:[0-9]{2} [A-Z]{3} /g,G=/(\\)?(MM?M?M?|dd?d?d|DD?D?D?|YYYY|YY|a|A|hh?|HH?|mm?|ss?|ZZ?|T)/g,B=/(\\)?([0-9]+|([a-zA-Z\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])+|([\+\-]\d\d:?\d\d))/gi,H=/([\+\-]|\d\d)/gi,C="Month,Date,Hours,Minutes,Seconds,Milliseconds".split(",");f=function(d,e){if(null===d)return null;var f;if(d&&d._d instanceof a)f=new a(+d._d);else if(e)if("[object Array]"===Object.prototype.toString.call(e)){var k=d.match(B),l=99,m,n,q;for(m=0;m<e.length;m++){n=j(d,
e[m]);q=k;for(var t=h(n,e[m]).match(B),w=Math.min(q.length,t.length),p=Math.abs(q.length-t.length),o=0,s=void 0,s=0;s<w;s++)~~q[s]!==~~t[s]&&o++;q=o+p;q<l&&(l=q,f=n)}}else f=j(d,e);else f=d===b?new a:d instanceof a?d:"[object Array]"===Object.prototype.toString.call(d)?g(d):new a(d);return new c(f)};f.version="1.3.0";f.lang=function(a,b){var c,d;d=[];if(b){for(c=0;12>c;c++)d[c]=RegExp("^"+b.months[c]+"|^"+b.monthsShort[c].replace(".",""),"i");b.monthsParse=b.monthsParse||d;l[a]=b}if(l[a])for(c=0;c<
w.length;c++)d=w[c],f[d]=l[a][d]||f[d];else z&&(c=require("./lang/"+a),f.lang(a,c))};f.lang("en",{months:"January,February,March,April,May,June,July,August,September,October,November,December".split(","),monthsShort:"Jan,Feb,Mar,Apr,May,Jun,Jul,Aug,Sep,Oct,Nov,Dec".split(","),weekdays:"Sunday,Monday,Tuesday,Wednesday,Thursday,Friday,Saturday".split(","),weekdaysShort:"Sun,Mon,Tue,Wed,Thu,Fri,Sat".split(","),longDateFormat:{LT:"h:mm A",L:"MM/DD/YYYY",LL:"MMMM D YYYY",LLL:"MMMM D YYYY LT",LLLL:"dddd, MMMM D YYYY LT"},
meridiem:{AM:"AM",am:"am",PM:"PM",pm:"pm"},calendar:{sameDay:"[Today at] LT",nextDay:"[Tomorrow at] LT",nextWeek:"dddd [at] LT",lastDay:"[Yesterday at] LT",lastWeek:"[last] dddd [at] LT",sameElse:"L"},relativeTime:{future:"in %s",past:"%s ago",s:"a few seconds",m:"a minute",mm:"%d minutes",h:"an hour",hh:"%d hours",d:"a day",dd:"%d days",M:"a month",MM:"%d months",y:"a year",yy:"%d years"},ordinal:function(a){var b=a%10;return 1===~~(a%100/10)?"th":1===b?"st":2===b?"nd":3===b?"rd":"th"}});f.fn=c.prototype=
{clone:function(){return f(this)},valueOf:function(){return+this._d},nativeDate:function(){return this._d},toString:function(){return this._d.toString()},toDate:function(){return this._d},format:function(a){return h(this._d,a)},add:function(a,b){this._d=e(this._d,a,1,b);return this},subtract:function(a,b){this._d=e(this._d,a,-1,b);return this},diff:function(a,b,c){var d=f(a),a=this._d-d._d,e=this.year()-d.year(),g=this.month()-d.month(),d=this.day()-d.day(),b="months"===b?12*e+g+d/30:"years"===b?
e+g/12:"seconds"===b?a/1E3:"minutes"===b?a/6E4:"hours"===b?a/36E5:"days"===b?a/864E5:"weeks"===b?a/6048E5:"days"===b?a/3600:a;return c?b:k(b)},from:function(a,b){var c=this.diff(a),d=f.relativeTime,e;e=k(Math.abs(c)/1E3);var g=k(e/60),h=k(g/60),j=k(h/24),l=k(j/365);e=45>e&&["s",e]||1===g&&["m"]||45>g&&["mm",g]||1===h&&["h"]||22>h&&["hh",h]||1===j&&["d"]||25>=j&&["dd",j]||45>=j&&["M"]||345>j&&["MM",k(j/30)]||1===l&&["y"]||["yy",l];e[2]=b;e=m.apply({},e);return b?e:(0>=c?d.past:d.future).replace(/%s/i,
e)},fromNow:function(a){return this.from(f(),a)},calendar:function(){var a=f(),a=this.diff(f([a.year(),a.month(),a.date()]),"days",!0),b=f.calendar,c=b.sameElse,a=-6>a?c:-1>a?b.lastWeek:0>a?b.lastDay:1>a?b.sameDay:2>a?b.nextDay:7>a?b.nextWeek:c;return this.format("function"===typeof a?a.apply(this):a)},isLeapYear:function(){var a=this.year();return 0===a%4&&0!==a%100||0===a%400},isDST:function(){return this.zone()!==f([this.year()]).zone()},day:function(a){var b=this._d.getDay();return"undefined"===
typeof a?b:this.add({d:a-b})}};for(s=0;s<C.length;s++)n(C[s].toLowerCase(),C[s]);n("year","FullYear");f.fn.zone=function(){return this._d.getTimezoneOffset()};return f}(Date);h.fn.stripTime=function(){this._d=new Date(864E5*Math.floor(this._d.valueOf()/864E5));return this};h.fn.yearDay=function(a){var b=Math.floor(this._d/864E5);return"undefined"===typeof a?b:this.add({d:a-b})};l=h().stripTime();"undefined"!==typeof jQuery&&(jQuery.fn.kalendae=function(a){this.each(function(b,c){"INPUT"===c.tagName?
$(c).data("kalendae",new j.Input(c,a)):$(c).data("kalendae",new j($.extend({},{attachTo:c},a)))});return this})})();
